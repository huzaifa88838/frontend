function GetClientDevice() {
    return typeof WURFL == "undefined" ? $.ua.device.type !== undefined ? $.ua.device.vendor + " " + $.ua.device.model : $.ua.browser.name + " " + $.ua.browser.version + " " + $.ua.os.name : WURFL.complete_device_name
}
function InitLoginForm() {
    try {
        let n = document.querySelector("#btn-refresh");
        n.addEventListener("click", function(n) {
            n.preventDefault();
            resetCaptchaImage()
        })
    } catch (n) {}
    try {
        let n = GetClientDevice();
        document.getElementById("Device").value = n
    } catch (n) {
        console.error(n);
        document.getElementById("Device").value = ""
    }
    try {
        let n = moment().utcOffset();
        document.getElementById("UtcOffset").value = n
    } catch (n) {}
}
function VerifyOTP() {
    let n = document.getElementById("otpcode").value;
    n != "" && $.ajax({
        type: "GET",
        url: "/Users/Login/?handler=VerifyotpCode&token=" + ttok + "&otp=" + n + "&device=@Model.Device",
        success: function(n) {
            n.success ? window.location.href = n.redirectToUrl : document.getElementById("errorBoxotp").innerHTML = n.message
        },
        error: function() {}
    })
}
function resetCaptchaImage() {
    let n = new Date;
    $("#img-captcha").attr("src", "/api/Users/getcaptchaimage?" + n.getTime())
}
